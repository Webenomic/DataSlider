<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="../dist/data-slider.min.js"></script>
<link rel="stylesheet" href="../dist/data-slider.css"></link>
<style type="text/css">
body,html {
    font-family:arial;
    font-size:14px;
}

</style>
</head>
<body>
<div id="sliderDiv" style="width:50%;min-height:400px;margin:50px;height:40%;float:left;margin-right:50px;border:1px solid #000;padding:30px;"></div>

<a href="javascript:resize()">Refresh</a><br><br>

<div style="padding-top:40px;" wbn-bind-transform="t1" wbn-bind="foo"> </div>

<input type="number" wbn-bind="foo"><br>

Slider Orientation: 
<input type="radio" name="orientation[]" value="horizontal" onClick="switchConfig('horizontal','orientation')" checked>Horizontal 
<input type="radio" name="orientation[]" value="vertical" onClick="switchConfig('vertical','orientation');switchConfig('up','direction');">Vertical
<br><br>
Slider Direction: 
<input type="radio" name="direction[]" value="right" onClick="switchConfig('right','direction')" checked>Right 
<input type="radio" name="direction[]" value="left" onClick="switchConfig('left','direction')">Left 

<input type="radio" name="direction[]" value="up" onClick="switchConfig('up','direction')" checked>Up
<input type="radio" name="direction[]" value="down" onClick="switchConfig('vertical','orientation');switchConfig('down','direction');">Down 

<br><br>
Slider Bar Thickness: <input type="range" onInput="slider.config.bar.thickness = this.value;slider.ui.update();" min="1" max="20" step="1"><br>

Handle Height: <input type="range" onInput="slider.config.handle.height = this.value;slider.ui.update();" min="1" max="80" step="1"><br>
Handle Width: <input type="range" onInput="slider.config.handle.width = this.value;slider.ui.update();" min="1" max="80" step="1"><br>
Handle Radius: <input type="range" onInput="slider.config.handle.borderRadius = this.value;slider.ui.update();" min="0" max="80" step="1"><br>
Handle Position: <input type="range" onInput="slider.config.handle.position = Number(this.value);slider.ui.update();" min="-30" max="30" step="1"><br>

Tick Label Position: <input type="range" onInput="slider.config.ticks.labels.position = Number(this.value);slider.ui.update();" min="-50" max="50" step="1"><br>
Tooltip Position: <input type="range" onInput="slider.config.tooltips.position = Number(this.value);slider.ui.update();" min="-50" max="50" step="1"><br>

Min: <input type="range" onInput="updateMin(Number(this.value))" min="0" max="2" step="0.05"><br>
Max: <input type="range" onInput="updateMax(Number(this.value))" value="2" min="2" max="10" step="1"><br>


<input type="checkbox" checked onClick="slider.config.handle.show = this.checked;slider.ui.update();"> Show Handle
<input type="checkbox" checked onClick="slider.config.ribbon.show = this.checked;slider.ui.update();"> Show Ribbon

<script>


foo=50;

var t1 = (val) => {return Number(val).toFixed(2) }; 
var t2 = (val) => {return val+'***'}; 

var options = (boundVar) => { 
	return {
		orientation:'horizontal',
		bar: {
			thickness:5,
	        borderRadius:10,
		},
		defaultValue:foo,
		
		responsive:true,
		range:{
		    min:-10,
		    max:100,
		    decimals:2,
		    step:1
		},
		ribbon: {
			show:true,
			color:(slider) => { return 'rgb(' + (slider.value+50)*5 + ',100,50)'; },
			color:'#990000',
            hoverColor:'#990000',
		},
		ticks: {
			marks: [
				{
					range:{
                        step:5,
                        min:-10,
                        max:100
                    },
                    height:20,
                    width:20,
                    borderRadius:16,
                    position:(slider,tickVal,tickIndex) => {
                        return tickIndex % 2 || tickIndex == 0 ? -5 : +5;	
                    },
                    color:'#990000',
                    style: (slider,val,index) => {
                    	return {
                   		   backgroundColor: '#999',
                   		   width:'20px',
                           height:'20px',
                           margin:'0px 0px'
                    	}
                    },
                    hoverStyle: {
                    	backgroundColor: 'blue',
                        width:'20px',
                        height:'20px',
                        margin:'0px 0px'
                    },
                    selectedStyle: {
                    	backgroundColor: '#990000',
                    	width:'22px',
                    	height:'22px',
                    	margin:'-1px -1px'
                    }
                }
			],
			
			labels: {
			    data:[-10,10,20,30,40].map((tick,i) => {
			           return { 
			               value: tick, 
			               label: {
			            	 text: (val,i) => { return val + 'x'; },
			            	 style: (val) => { 
			            		 return { 
			            			 fontSize : '14px',
			            			 color:'#fff',
			            			 backgroundColor:'#e4a114',
			            			 width:'30px'
		            			 } 
		            		 }
			               }
			           }
			    }),
	            style: (val,i) => {
	            	return {
	            	    
	                };
	            },
	            hoverStyle: {
	            	color:'#990000'
	            },
	            selectedStyle: {
	            	color:'#00628c'
	            },
			    snap:false,
			    labelsClickable: true,
			    position:(slider,tickVal,tickIndex) => {
			    	return tickIndex % 2 ? 25 : -25; 
			    }
			}
		},
		tooltips: {
			show:true,
			label: {
				text:(slider,val) => { return val + 'x'; },
				style:(val) => {
					return {
						   
					}
				}
			},
			ticks: {
			   show:true,
               label:{
                   text:(silder,val) => { return 'VAL:'+val}
               }
			},
			style: (slider,val) => {
				return {
				    fontWeight:'bold',
				}
			},
			position:-20
		},
		handle: {
			width:(slider,val) => {
				return val;
			},
			height:(slider,val) => {
                return val;
            },
            borderRadius:(slider,val) => {
                return val;
            },
		    show:true,
		    style:(slider,val) => {
		    	return {
		    	    backgroundColor:(val % 5) ? '#00627c' : '#e4a114'	
		    	}
		    },
		    label: {
		    	  show:true,
		    	  style:(slider,val) => {
		    		  return {
		    			  color: '#ffffff',
		    			  fontWeight:'bold',
		    		  }
		    	  },
		    	  text:(slider,val) => {
		    		  return val;
		    	  },
		    	  position:(slider,val) => {
		             return 0;
		          }
		    },
		    position:20
		},
		caps: {
			startCap: {
				label: {
					text:'Foo'
				},
				style: {
					padding:'4px'
				}
			},
			endCap: {
                label: {
                    text:'Bar'
                }
            }
		},
		dataBinding: {
			scope:window,
			property:'foo'
		},
		arrowKeys:true
	};
}

//var sliders = [];

var slider = new DataSlider(document.getElementById('sliderDiv'),options('foo'));

document.addEventListener('keydown',(e) => {
    var sliderRange = slider.config.range.step;
    if (e.shiftKey && (e.which > 36 && e.which < 41)) {
    	
        
    } else {
    var updatedRange = (e.shiftKey && e.which == 16) ? 5 : 1;
    if (sliderRange != updatedRange) {
          slider.config.range.step = updatedRange;
          slider.ui.update();
    }
    }
}); 
document.addEventListener('keyup',(e) => {
    slider.config.arrowKeys = true;
    var sliderRange = slider.config.range.step;
    if (sliderRange == 5) {
        slider.config.range.step = 1;
        slider.ui.update();
    }
    
});


function updateMin(minValue) {
	let config = slider.config;
	config.defaultValue = currentValue;
    config.range.min = minValue;
    console.log(config.ticks.data);
    slider.reset(slider.value);

}

function updateMax(maxValue) {
    let config = slider.config;
    config.range.max = maxValue;
    //config.ticks.data.push({value:maxValue});
    slider.reset(slider.value);
}

function switchConfig(value,property) {
	const sliderVal = slider.value;
	const config = slider.config;
	document.getElementById('sliderDiv').innerHTML = '';
	config[property] = value;
	config.defaultValue = sliderVal;
	slider = new DataSlider(document.getElementById('sliderDiv'),config);
}



/*
var tooltipElement = document.getElementById('tooltipElement');
var listenerElement = document.getElementsByClassName('wbn_ds_container')[0].parentElement;

 listenerElement.addEventListener('mousemove',(e) => {
  tooltipElement.style.display = 'block'; 
  tooltipElement.innerHTML = Math.round(((e.clientX - listenerElement.offsetLeft) / listenerElement.getBoundingClientRect().width).toFixed(2) * 100); 
  Object.assign(tooltipElement.style,{
   left: e.clientX,
   top: 40
  });
 });
 
 listenerElement.addEventListener('mouseout',(e) => {
  tooltipElement.style.display = 'none'; 
 });
   
*/






</script>

</body>

</html>