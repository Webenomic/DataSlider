<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="../dist/data-slider.js"></script>
<link rel="stylesheet" href="../dist/data-slider.css"></link>
<style type="text/css">
body,html {
    font-family:arial;
    font-size:14px;
}

</style>
</head>
<body style="">


<div id="sliderDiv" style="width:50%;margin:50px;height:200px;float:left;margin-right:50px;"></div>

<div style="padding-top:40px;" wbn-bind-transform="t1" wbn-bind="foo"> </div>

<input type="number" wbn-bind="foo"><br>

Slider Orientation: 
<input type="radio" name="orientation[]" value="horizontal" onClick="switchConfig('horizontal','orientation')" checked>Horizontal 
<input type="radio" name="orientation[]" value="vertical" onClick="switchConfig('vertical','orientation')">Vertical
<br><br>
Slider Direction: 
<input type="radio" name="direction[]" value="right" onClick="switchConfig('right','direction')" checked>Right 
<input type="radio" name="direction[]" value="left" onClick="switchConfig('left','direction')">Left 
<br><br>
Slider Bar Thickness: <input type="range" onInput="slider.config.bar.thickness = this.value;slider.ui.update();" min="1" max="20" step="1"><br>

Handle Height: <input type="range" onInput="slider.config.handle.height = this.value;slider.ui.update();" min="10" max="80" step="1"><br>
Handle Width: <input type="range" onInput="slider.config.handle.width = this.value;slider.ui.update();" min="1" max="80" step="1"><br>
Handle Radius: <input type="range" onInput="slider.config.handle.borderRadius = this.value;slider.ui.update();" min="0" max="80" step="1"><br>
Handle Position: <input type="range" onInput="slider.config.handle.position = Number(this.value);slider.ui.update();" min="-30" max="30" step="1"><br>

Tick Label Position: <input type="range" onInput="slider.config.ticks.labels.position = Number(this.value);slider.ui.update();" min="-50" max="50" step="1"><br>
Tooltip Position: <input type="range" onInput="slider.config.tooltips.position = Number(this.value);slider.ui.update();" min="-50" max="50" step="1"><br>

Min: <input type="range" onInput="updateMin(Number(this.value))" min="0" max="2" step="0.05"><br>
Max: <input type="range" onInput="updateMax(Number(this.value))" value="2" min="2" max="10" step="1"><br>


<input type="checkbox" checked onClick="slider.config.handle.show = this.checked;slider.ui.update();"> Show Handle
<input type="checkbox" checked onClick="slider.config.ribbon.show = this.checked;slider.ui.update();"> Show Ribbon

<script>

foo=-20;

var t1 = (val) => {return Number(val).toFixed(2) }; 
var t2 = (val) => {return val+'***'}; 

var options = (boundVar) => { 
	return {
		direction:'up',
		orientation:'vertical',
		bar: {
			thickness:10,
	        borderRadius:10,
	        backgroundColor:'#474747'
		},
		defaultValue:foo,
		color:'#00628c',
		hoverColor:'#c0c0c0',
		responsive:true,
		range:{
		    min:-100,
		    max:10,
		    decimals:2,
		    step:1
		},
		ribbon: {
			show:true,
			color:(slider) => { return 'rgb(' + (slider.value+50)*5 + ',100,50)'; },
		},
		ticks: {
			marks: [
				{
                   
					range:{
                        step:20,
                        min:-100,
                        max:10
                    },
                    height:16,
                    width:16,
                    borderRadius:16,
                    position:0,
                    color:'#990000',
                    style: {
                        border:'2px solid #fff'
                    } 
                }
			],
			
			labels: {
			    data:[0,-10,-20,-30,-40,-100].map((tick,i) => {
			           return { 
			               value: tick, 
			               label: {
			            	 text: (val,i) => { return val + 'x'; },
			            	 style: (val) => { 
			            		 return { 
			            			 fontSize : 12+2*val+'px',
			            			 color:'#fff',
			            			 backgroundColor:'#e4a114'
		            			 } 
		            		 }
			               }
			           }
			    }),
	            style: (val,i) => {
	            	return {
	            	    
	                };
	            },
	            hoverStyle: {
	            	color:'#990000'
	            },
	            selectedStyle: {
	            	color:'#00628c'
	            },
			    snap:false,
			    labelsClickable: true,
			    position:0
			}
		},
		tooltips: {
			show:true,
			label: {
				text:(val) => { return val + 'x'; },
				style:(val) => {
					return {
					   
					}
				}
			},
			ticks: {
               show:true,
               label:{
                   text:(val) => { return 'VAL:'+val}
               },
               position:15
			},
			style: {
				fontWeight:'bold'
			},
			position:-20
		},
		handle: {
			width:20,
			height:20,
		    show:true,
		    color:(slider) => { return 'rgb(' + (slider.value+50)*5 + ',100,50)'; },
		},
		dataBinding: {
			scope:window,
			property:'foo'
		}
	};
}

//var sliders = [];


slider = new DataSlider(document.getElementById('sliderDiv'),options('foo'));

function updateMin(minValue) {
	let config = slider.config;
	config.defaultValue = currentValue;
    config.range.min = minValue;
    //if (config.ticks.data[0].value > minValue) {
    //config.ticks.data.push({value:minValue});
    //}
    console.log(config.ticks.data);
    slider.reset(slider.value);

}

function updateMax(maxValue) {
    let config = slider.config;
    config.range.max = maxValue;
    //config.ticks.data.push({value:maxValue});
    slider.reset(slider.value);
}

function switchConfig(value,property) {
	const sliderVal = slider.value;
	const config = slider.config;
	document.getElementById('sliderDiv').innerHTML = '';
	config[property] = value;
	config.defaultValue = sliderVal;
	slider = new DataSlider(document.getElementById('sliderDiv'),config);
}



/*
var tooltipElement = document.getElementById('tooltipElement');
var listenerElement = document.getElementsByClassName('wbn_ds_container')[0].parentElement;

 listenerElement.addEventListener('mousemove',(e) => {
  tooltipElement.style.display = 'block'; 
  tooltipElement.innerHTML = Math.round(((e.clientX - listenerElement.offsetLeft) / listenerElement.getBoundingClientRect().width).toFixed(2) * 100); 
  Object.assign(tooltipElement.style,{
   left: e.clientX,
   top: 40
  });
 });
 
 listenerElement.addEventListener('mouseout',(e) => {
  tooltipElement.style.display = 'none'; 
 });
   
*/





</script>

</body>

</html>